@using SocialNetwork.Models
@using SocialNetwork.Resources
@model ViewAccountViewModel
@{
    ViewBag.Title = "View account";
}
<script src="~/Scripts/jquery-2.1.1.js"></script>

<script type="text/javascript">
    $(function(){
        setInterval(function(){
            $('#timeA').load('div#locked')},
            5000)
    });
</script> 

<div class="jumbotron">
    <div class="row">
        <div class="col-md-8">
            <div class="row">
                <div class="col-md-4">
                    <img src="@Model.UserPhotoUrl" width="200" height="200" alt="@Model.UserName" />
                </div>
                <div class="col-md-8">
                    <text style="font-size: xx-large">@Model.UserName</text>
                    <br />
                    @Model.Email
                    <br /><br />
                    @Html.ActionLink(Resource.UserEditAccountInfo, "EditAccount", "Account", routeValues: null, htmlAttributes: new { title = Resource.UserEditAccountInfo })
                    <img src="~/Content/images/edit-icon-16.png" id="edit-icon" width="16px" height="16px" />
                    <br />
                    @Html.ActionLink(Resource.UserChangePassword, "ChangePassword", "Account", routeValues: null, htmlAttributes: new { title = Resource.UserChangePassword })
                    <br />
                    <text class="text-success">@ViewBag.StatusMessage</text>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <ul class="list-group">
                <li class="list-group-item">
                    <span class="badge">@Model.TaskAmount</span>
                    @Resource.UserTaskAmount
                </li>
                <li class="list-group-item">
                    <span class="badge">@Model.AttemptAmount</span>
                    @Resource.UserAttemptAmount
                </li>
                <li class="list-group-item">
                    <span class="badge">@Model.SolutionAmount</span>
                    @Resource.UserSolutionAmount
                </li>
                <li class="list-group-item">
                    <span class="badge" style="background-color: #62c462"><b>@Model.UserRate</b></span>
                    <b>@Resource.UserRate</b>
                </li>
            </ul>
            @if (User.IsInRole("admin") && Model.UserName == User.Identity.Name)
            {
                <ul class="list-group panel-warning">
                    <li class="list-group-item panel-heading">
                        Administrator's control panel
                    </li>
                    <li class="list-group-item">
                        <span class="badge">@ViewBag.TotalUsers</span>
                        @Html.ActionLink("Users", "AdminControlPanelUsers", "Admin")
                    </li>
                    <li class="list-group-item">
                        <span class="badge">@ViewBag.TotalTasks</span>
                        @Html.ActionLink("Tasks", "AdminControlPanelTasks", "Admin")
                    </li>
                </ul>
            }
            @if (Model.LockoutEnabled)
            {
                TimeSpan? ts = new TimeSpan();
                ts = Model.LockoutDateEndUtc - DateTime.Now;
                <div id="locked" class="alert alert-dismissable alert-danger">
                    <strong id="update">Account is blocked.</strong>
                    @ts
                </div>
            }
        </div>
    </div>
</div>

@Html.Partial("_UserTasksPartial")

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
